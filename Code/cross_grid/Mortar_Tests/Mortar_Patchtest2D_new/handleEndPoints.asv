function [K,f] = handleEndPoints(mesh,nodes,dofM,dofS,dofIm,dofIs,K,f)
[~,id] = sort(mesh.coordinates(nodes,1),'ascend');
n1 = nodesSlave(id(1));
n2 = nodesSlave(id(2));
n3 = nodesSlave(id(end-1));
n4 = nodesSlave(id(end));

tmp = [n1 n2; n4 n3];
% sum rows and column of end points to adjacent contribution
for i = 1:2
    nEnd = tmp(i,1);
    nAdj = tmp(i,2);
    for j = -1:0
        % get corresponding dof
        dofEnd = getGlobalDofs(2*nEnd+j,dofM,dofS,dofIm,dofIs,'lagrange');
        dofAdj = getGlobalDofs(2*nAdj+j,dofM,dofS,dofIm,dofIs,'lagrange');
        K(dofAdj,:) =  K(dofAdj,:) + K(dofEnd,:);
        K(:,dofAdj) =  K(:.dofAdj) + K(:,dofEnd);
    end
end

